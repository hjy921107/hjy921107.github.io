<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>CentOS_7_用户管理 | jyhuang&#39;s blogs</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="1. 基本概念 2. 与用户/用户组相关的配置文件 3. 用户与用户组的相关命令 3.1 用户组 3.1.1 增加用户组 3.1.2 修改用户组 3.1.3 删除用户组   3.2 用户 3.2.1 新增用户 3.2.2 修改用户 3.2.3 删除用户   3.3 进阶命令 3.3.1 passwd 命令 3.3.2 gpasswd 命令   3.4 其他命令      1. 基本概念 用户：">
<meta name="keywords" content="CentOS 7">
<meta property="og:type" content="article">
<meta property="og:title" content="CentOS_7_用户管理">
<meta property="og:url" content="http://yoursite.com/2017/09/17/CentOS-7-用户管理/index.html">
<meta property="og:site_name" content="jyhuang&#39;s blogs">
<meta property="og:description" content="1. 基本概念 2. 与用户/用户组相关的配置文件 3. 用户与用户组的相关命令 3.1 用户组 3.1.1 增加用户组 3.1.2 修改用户组 3.1.3 删除用户组   3.2 用户 3.2.1 新增用户 3.2.2 修改用户 3.2.3 删除用户   3.3 进阶命令 3.3.1 passwd 命令 3.3.2 gpasswd 命令   3.4 其他命令      1. 基本概念 用户：">
<meta property="og:locale" content="zh-CN">
<meta property="og:updated_time" content="2017-09-17T14:58:23.660Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="CentOS_7_用户管理">
<meta name="twitter:description" content="1. 基本概念 2. 与用户/用户组相关的配置文件 3. 用户与用户组的相关命令 3.1 用户组 3.1.1 增加用户组 3.1.2 修改用户组 3.1.3 删除用户组   3.2 用户 3.2.1 新增用户 3.2.2 修改用户 3.2.3 删除用户   3.3 进阶命令 3.3.1 passwd 命令 3.3.2 gpasswd 命令   3.4 其他命令      1. 基本概念 用户：">
  
    <link rel="alternate" href="/atom.xml" title="jyhuang&#39;s blogs" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
  

</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">jyhuang&#39;s blogs</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="搜索"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://yoursite.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-CentOS-7-用户管理" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/09/17/CentOS-7-用户管理/" class="article-date">
  <time datetime="2017-09-17T14:57:28.000Z" itemprop="datePublished">2017-09-17</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Linux/">Linux</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      CentOS_7_用户管理
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <!-- toc -->
<ul>
<li><a href="#1-基本概念">1. 基本概念</a></li>
<li><a href="#2-与用户用户组相关的配置文件">2. 与用户/用户组相关的配置文件</a></li>
<li><a href="#3-用户与用户组的相关命令">3. 用户与用户组的相关命令</a><ul>
<li><a href="#31-用户组">3.1 用户组</a><ul>
<li><a href="#311-增加用户组">3.1.1 增加用户组</a></li>
<li><a href="#312-修改用户组">3.1.2 修改用户组</a></li>
<li><a href="#313-删除用户组">3.1.3 删除用户组</a></li>
</ul>
</li>
<li><a href="#32-用户">3.2 用户</a><ul>
<li><a href="#321-新增用户">3.2.1 新增用户</a></li>
<li><a href="#322-修改用户">3.2.2 修改用户</a></li>
<li><a href="#323-删除用户">3.2.3 删除用户</a></li>
</ul>
</li>
<li><a href="#33-进阶命令">3.3 进阶命令</a><ul>
<li><a href="#331-passwd-命令">3.3.1 passwd 命令</a></li>
<li><a href="#332-gpasswd-命令">3.3.2 gpasswd 命令</a></li>
</ul>
</li>
<li><a href="#34-其他命令">3.4 其他命令</a></li>
</ul>
</li>
</ul>
<!-- tocstop -->
<hr>
<h1><span id="1-基本概念">1. 基本概念</span></h1><ul>
<li>用户：使用操作系统的人</li>
<li>用户组：具有相同系统权限的一组用户</li>
</ul>
<h1><span id="2-与用户用户组相关的配置文件">2. 与用户/用户组相关的配置文件</span></h1><ul>
<li><p>/etc/group：存储当前系统中所有用户组的信息</p>
<p>  说明：</p>
<ul>
<li>文件内容格式：组名称:组密码占位符:组编号:组中用户名列表</li>
<li>每行代表一个组信息，组信息中用 <code>:</code> 分隔</li>
<li>所有的组密码占位符都是 <code>x</code></li>
<li>root 组的组编号始终为 <code>0</code></li>
<li>1-499 为系统预留的编号，系统自动分配当前未使用的最小编号给对应的应用程序</li>
<li>用户手动创建的组编号是从 500 开始的，系统自动分配从 500 开始的当前未使用的最小编号给新建的用户组</li>
<li>组中用户名列表为空并不一定是该组中没有任何用户，当组中的用户名同组名时，该用户名是可以在列表中省略的</li>
</ul>
</li>
<li><p>/etc/gshadow：存储当前系统中用户组的密码信息</p>
<p>  说明：</p>
<ul>
<li>此文件中的内容与 /etc/group 文件中的内容一一对应</li>
<li>文件内容格式：组名称:组密码:组管理者:组中的用户名列表</li>
<li>每行代表一个组信息，组信息中用 <code>:</code> 分隔</li>
<li>组密码如果为 */!/空 均视为组密码为空</li>
<li>组管理者：表示组内哪些用户可以管理这个组，通常情况下为空，即表示组内所有用户都可以管理这个用户组</li>
</ul>
</li>
<li><p>/etc/passwd：存储当前系统中的所有用户的相关信息</p>
<p>  说明：</p>
<ul>
<li>文件内容格式：用户名:密码占位符:用户编号:用户组编号:用户注释信息:用户主目录:shell 类型</li>
<li>每行代表一个组信息，组信息中用 <code>:</code> 分隔</li>
<li>所有的组密码占位符都是 <code>x</code></li>
<li>root 用户的用户编号始终为 <code>0</code></li>
</ul>
</li>
<li><p>/etc/shadow：存储当前系统中所有用户的密码信息</p>
<p>  说明：</p>
<ul>
<li>此文件的内容与 /etc/passwd 文件中的内容一一对应</li>
<li>文件内容格式：用户名:密码::::::</li>
<li>每行代表一个用户信息，用户信息中用 <code>:</code> 分隔</li>
<li>用户密码如果为 */!/空，均视为该用户密码为空</li>
<li>密码通过一种单向的加密方式保存</li>
</ul>
</li>
</ul>
<h1><span id="3-用户与用户组的相关命令">3. 用户与用户组的相关命令</span></h1><h2><span id="31-用户组">3.1 用户组</span></h2><h3><span id="311-增加用户组">3.1.1 增加用户组</span></h3><p>格式：groupadd [选项] 参数</p>
<ul>
<li><code>groupadd sexy</code>：增加用户组，组名为 sexy</li>
<li><code>groupadd -g 888 boss</code>：创建 group id 为 888、组名为 boss 的用户组</li>
</ul>
<h3><span id="312-修改用户组">3.1.2 修改用户组</span></h3><p>格式：groupmod [选项] 参数</p>
<ul>
<li><code>groupmod -n market sexy</code>：修改用户组名，新组名 原组名</li>
<li><code>groupmod -g 668 market</code>：修改指定用户组的 group id</li>
</ul>
<h3><span id="313-删除用户组">3.1.3 删除用户组</span></h3><p>格式：groupdel [选项] 参数</p>
<ul>
<li><code>groupdel market</code>：删除用户组 market。删除用户组之前，必须先删除该用户组下的所有用户</li>
</ul>
<h2><span id="32-用户">3.2 用户</span></h2><h3><span id="321-新增用户">3.2.1 新增用户</span></h3><p>格式：useradd [选项] 参数</p>
<p>说明：</p>
<ul>
<li>如果创建用户时未指定该用户所在的组，系统会自动创建与该用户名同名的用户组，并将该用户加入到此用户组</li>
<li><p>如果创建用户时未指定用户的家目录，这属于默认情况，系统会在 /home 目录下自动创建与用户名同名的目录作为该用户的家目录</p>
</li>
<li><p><code>useradd -g sexy lscang</code>：在指定的用户组下面新增用户</p>
</li>
<li><code>useradd -g group1 -G group2,group3 username</code>：新增用户，指定该用户的主要组 group1，附属组 group2 和 group3</li>
<li><code>useradd -d /home/test test</code>：新增用户并指定该用户的家目录</li>
</ul>
<h3><span id="322-修改用户">3.2.2 修改用户</span></h3><p>格式：usermod [选项] 参数</p>
<ul>
<li><code>usermod -c 123 test</code>：给指定用户添加备注信息</li>
<li><code>usermod -l bdyjy lscang</code>：修改用户名，新名称 原名称</li>
<li><code>usermod -g sexy test</code>：修改指定用户所在的用户组，组名 用户名</li>
<li><code>usermod -d /home/test test</code>：修改用户的家目录，系统不会自动创建该目录，需要手动创建</li>
</ul>
<h3><span id="323-删除用户">3.2.3 删除用户</span></h3><p>格式：userdel [选项] 参数</p>
<ul>
<li><code>userdel test</code>：删除指定用户，但并不会删除该用户的家目录</li>
<li><code>userdel -r lscang</code>：删除指定用户，并删除该用户的家目录</li>
</ul>
<h2><span id="33-进阶命令">3.3 进阶命令</span></h2><h3><span id="331-passwd-命令">3.3.1 passwd 命令</span></h3><ul>
<li>锁定帐户：<code>passwd -l username</code></li>
<li>解锁帐户：<code>passwd -uf username</code>，其中 -f 为 force，不添加会出现警告，导致解锁失败</li>
<li><code>passwd username</code>：设置指定用户的密码，执行此命令后，系统会提示输入密码和确认密码，只要再次输入相同，即可设置成功</li>
<li>清除帐户密码：<code>passwd -d username</code></li>
</ul>
<h3><span id="332-gpasswd-命令">3.3.2 gpasswd 命令</span></h3><p>在 Linux 系统中，一个用户是可以属性多个组的，其中一个为主要组，其他的为附属组。默认情况下用户的所有权限、操作等都是基于主要组的。</p>
<ul>
<li><code>gpasswd -a lscang boss</code>：为用户添加附属组，可以同时添加多个附属组，组名之间用 <code>,</code> 隔开</li>
<li><code>newgrp boss</code>：用户切换组，如果目标组存在组密码，需要验证密码</li>
<li><code>gpasswd -d lscang boss</code>：删除用户的附属组</li>
<li><code>gpasswd groupname</code>：设置指定用户组的密码，执行此命令后，系统会提示输入密码和确认密码，只要再次输入相同，即可设置成功</li>
</ul>
<h2><span id="34-其他命令">3.4 其他命令</span></h2><ul>
<li><code>touch /etc/nologin</code>：在 /etc 目录下创建文件 nologin，可以阻止除 root 用户以外的所有用户的登陆，文件内容无关紧要</li>
</ul>
<ul>
<li>切换用户（需要用户密码，root 用户切换到其他用户不需要密码）：<ul>
<li><code>su</code>：直接执行，不加用户名，切换到 root 用户</li>
<li><code>su username</code>：切换到指定的用户</li>
</ul>
</li>
<li><code>id username/groupname</code>：<ul>
<li>username：显示指定用户信息，包括用户编号、用户名</li>
<li>groupname：显示指定用户组信息，包括主要组编号及名称、附属组列表</li>
</ul>
</li>
</ul>
<ul>
<li><code>groups username</code>：显示该用户所在的所有组</li>
<li><code>chfn username</code>：修改用户资料，按照系统提示输入即可</li>
<li><code>finger username</code>：显示用户的详细资料，需要 finger 包的支持</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2017/09/17/CentOS-7-用户管理/" data-id="cj7ovn50b000acpsbcjvufwhu" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/CentOS-7/">CentOS 7</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2017/09/17/CentOS-7-磁盘管理/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          CentOS_7_磁盘管理
        
      </div>
    </a>
  
  
    <a href="/2017/09/17/CentOS-7-基本命令/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">CentOS_7_基本命令</div>
    </a>
  
</nav>

  
</article>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">分类</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Linux/">Linux</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/CentOS-7/">CentOS 7</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签云</h3>
    <div class="widget tagcloud">
      <a href="/tags/CentOS-7/" style="font-size: 10px;">CentOS 7</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">归档</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/09/">九月 2017</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">最新文章</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2017/09/17/CentOS-7-系统管理/">CentOS_7_系统管理</a>
          </li>
        
          <li>
            <a href="/2017/09/17/CentOS-7-bash基础/">CentOS_7_bash基础</a>
          </li>
        
          <li>
            <a href="/2017/09/17/CentOS-7-Shell基础/">CentOS_7_Shell基础</a>
          </li>
        
          <li>
            <a href="/2017/09/17/CentOS-7-服务管理/">CentOS_7_服务管理</a>
          </li>
        
          <li>
            <a href="/2017/09/17/CentOS-7-网络管理/">CentOS_7_网络管理</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2017 jyhuang<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>

  </div>
</body>
</html>